(this.webpackJsonpkiko=this.webpackJsonpkiko||[]).push([[0],{49:function(e,t,n){e.exports=n(96)},54:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),r=n(38),u=n.n(r),c=(n(54),n(7)),s=(n(55),n(11)),i=n(12);function l(){var e=Object(s.a)(["\n  position: absolute !important;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n"]);return l=function(){return e},e}function d(){var e=Object(s.a)(["\n  position: relative;\n  width: 100vw;\n  height: 100vh;\n"]);return d=function(){return e},e}var p=i.a.div(d()),f=i.a.div(l()),m=a.a.createContext({}),v=function(){var e=a.a.useContext(m),t=e.map,n=e.popup;return a.a.useEffect((function(){t.on("load",(function(){t.on("mouseenter","unclustered-point",(function(e){t.getCanvas().style.cursor="pointer";for(var o=e.features[0].geometry.coordinates.slice(),a=e.features[0].properties.title;Math.abs(e.lngLat.lng-o[0])>180;)o[0]+=e.lngLat.lng>o[0]?360:-360;n.setLngLat(o).setHTML(a).addTo(t)})),t.on("mouseleave","unclustered-point",(function(){t.getCanvas().style.cursor="",n.remove()}))}))}),[t,n]),null},g=n(45),y=n(46),h=n(44),b=new y.a("L2YJ2X5F1E1C4DQJF4TLSCBCTLAUUUEXHMDGH3WPNNRNFLVU","GENU2POR33WYGC5WBG0M1RYUIGYBIH5UPVA52Q32WNAAN0JU"),E=function(e){var t=e.children,n=e.mapboxgl,o=e.mapRef.current,r=a.a.useMemo((function(){return new n.Map({accessToken:"pk.eyJ1IjoieXVyaW1hbGFraG92IiwiYSI6ImNpdHB5YXo4aDAwMWEzM3BmaHR2dHlld3AifQ.42Ln8kmZBnERNy04ZiQN5Q",container:o,style:"mapbox://styles/mapbox/streets-v11",center:[-.118092,51.509865],zoom:9})}),[o,n.Map]);a.a.useEffect((function(){r.on("load",(function(){return o.classList.add("loaded")}))}),[r]);var u=a.a.useMemo((function(){return new n.Popup({closeButton:!1,closeOnClick:!0})}),[n.Popup]),s=a.a.useState([]),i=Object(c.a)(s,2),l=i[0],d=i[1];return a.a.createElement(m.Provider,{value:{venues:l,updateVenues:function(e){var t=r.getCenter(),n=t.lng,o=t.lat,a=r.getBounds().getSouthWest(),u=r.getBounds().getNorthWest(),c=Math.floor(Object(h.distance)([a.lng,a.lat],[u.lng,u.lat],{units:"meters"})/2),s=g.a.request({ll:"".concat(o,",").concat(n),radius:Math.min(c,1e5),limit:50,categoryId:["4bf58dd8d48988d163941735","4d4b7104d754a06370d81259"]}).payload;b.venues.getVenues(s).then((function(e){var t=e.response.venues;d(t)}))},map:r,popup:u}},t)},w=function(){var e=a.a.useContext(m),t=e.map,n=e.venues,o=e.updateVenues;a.a.useEffect((function(){t.on("load",(function(){t.addSource("venues",{type:"geojson",data:{type:"FeatureCollection",features:[]},cluster:!0,clusterMaxZoom:13,clusterRadius:50})})),t.on("load",o),t.on("zoomend",o),t.on("dragend",o)}),[t,o]);var r={type:"FeatureCollection",features:n.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:[e.location.lng,e.location.lat]},properties:{title:e.name}}}))},u=t.getSource("venues");return u&&u.setData(r),null},C=function(){var e=a.a.useContext(m).map;return a.a.useEffect((function(){e.on("load",(function(){e.addLayer({id:"clusters",type:"circle",source:"venues",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#51bbd6",10,"#f1f075",50,"#f28cb1"],"circle-radius":["step",["get","point_count"],20,10,30,50,40]}}),e.addLayer({id:"cluster-count",type:"symbol",source:"venues",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),e.addLayer({id:"unclustered-point",type:"circle",source:"venues",filter:["!",["has","point_count"]],paint:{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}}),e.on("click","clusters",(function(t){var n=e.queryRenderedFeatures(t.point,{layers:["clusters"]}),o=n[0].properties.cluster_id;e.getSource("venues").getClusterExpansionZoom(o,(function(t,o){t||e.easeTo({center:n[0].geometry.coordinates,zoom:o})}))})),e.on("mouseenter","clusters",(function(){e.getCanvas().style.cursor="pointer"})),e.on("mouseleave","clusters",(function(){e.getCanvas().style.cursor=""}))}))}),[e]),null},x=function(e){var t=e.mapboxgl,n=e.mapRef;return a.a.createElement(E,{mapboxgl:t,mapRef:n},a.a.createElement(w,null),a.a.createElement(C,null),a.a.createElement(v,null))},k=function(){var e=a.a.useState(!1),t=Object(c.a)(e,2),o=t[0],r=t[1],u=a.a.useState(),s=Object(c.a)(u,2),i=s[0],l=s[1],d=a.a.useRef(null);return a.a.useEffect((function(){n.e(3).then(n.t.bind(null,99,7)).then(l).then((function(){return r(!0)}))}),[]),a.a.createElement(p,null,a.a.createElement(f,{id:"map",ref:d}),o?a.a.createElement(x,{mapboxgl:i,mapRef:d}):null)},M=function(){return a.a.createElement(k,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[49,1,2]]]);
//# sourceMappingURL=main.0a98b268.chunk.js.map